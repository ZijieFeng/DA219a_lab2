(this.webpackJsonplab2_frontend=this.webpackJsonplab2_frontend||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"notify",(function(){return P})),n.d(a,"push",(function(){return W})),n.d(a,"shift",(function(){return z})),n.d(a,"close",(function(){return M}));var r={};n.r(r),n.d(r,"getRegistrations",(function(){return q})),n.d(r,"getRegistrationsSuccess",(function(){return U})),n.d(r,"getRegistrationsFailure",(function(){return G})),n.d(r,"changeOrder",(function(){return X}));var i={};n.r(i),n.d(i,"getLatestFiveRegistrations",(function(){return ne}));var o=n(44),c=n(0),s=n.n(c),l=n(19),u=n.n(l),d=n(170),m=n(85),f=n(28),p=(n(106),n(171)),g=function(e){var t,n=e.disabled,a=void 0!==n&&n,r=e.children;return a||"undefined"===typeof window||!window.location||"http:"!==window.location.protocol||("localhost"===(t=window.location.hostname)||"[::1]"===t||t.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?r:(window.location.href=window.location.href.replace(/^http(?!s)/,"https"),null)},b=n(58),h=n(133),E=n(167),x=n(163),O=n(164),v=n(166),y=n(161),S=n(165),k=n(174),w=n(160),j=n(173),_=n(158),R=Object(_.a)((function(e){return{checkbox:{padding:e.spacing(1.5)}}}));function A(e){var t=e.row,n=e.selection,a=e.columns,r=e.classNames,i=e.cellClassName,o=e.RowActions,c=e.typographyVariant,l=R(),u=null===n||void 0===n?void 0:n.isSelected(t);return s.a.createElement(w.a,{hover:!0,role:"checkbox",tabIndex:-1,selected:u,onClick:function(){return null===n||void 0===n?void 0:n.select(t)},className:r.row},n&&s.a.createElement(y.a,{padding:"checkbox"},s.a.createElement(j.a,{checked:u,inputProps:{"aria-labelledby":t.id},className:l.checkbox})),a.map((function(e){return s.a.createElement(y.a,{key:e.field,className:i},s.a.createElement(x.a,{variant:c,component:"div"},e.Component?s.a.createElement(e.Component,{row:t,classes:r}):t[e.field]))})),o&&s.a.createElement(y.a,null,s.a.createElement(o,{row:t})))}var C=Object(_.a)((function(e){return{visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},cell:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}}));function N(e){var t=e.data,n=e.columns,a=e.selection,r=e.sorting,i=e.RowActions,o=e.classNames,c=e.typographyVariant,l=e.CustomRow,u=C(),d=r||{},m=d.order,f=d.orderBy,p=d.handleRequestSort,g=s.a.useMemo((function(){return(null===a||void 0===a?void 0:a.countMatched(t))||0}),[a,t]),b=s.a.useCallback((function(){return null===a||void 0===a?void 0:a.selectAll(t.filter((function(e){return!e.disabled})))}),[a,t]),h=s.a.useMemo((function(){return c||"body2"}),[c]);return s.a.createElement(O.a,{stickyHeader:!0},s.a.createElement(S.a,null,s.a.createElement(w.a,null,a&&s.a.createElement(y.a,{padding:"checkbox"},s.a.createElement(j.a,{indeterminate:g>0&&g<t.length,checked:g===t.length&&0!==g,onChange:b})),n.map((function(e){return s.a.createElement(y.a,{key:e.field,className:u.cell},s.a.createElement(k.a,{active:f===e.field,direction:m,onClick:(t=e.field,function(){"function"===typeof p&&p(t)})},s.a.createElement(x.a,{variant:h},e.title),f===e.field?s.a.createElement("span",{className:u.visuallyHidden},"desc"===m?"sorted descending":"sorted ascending"):null));var t})),i&&s.a.createElement(y.a,{className:u.cell}))),s.a.createElement(v.a,null,t.map((function(e,t){return l?s.a.createElement(l,{row:e,key:"index - ".concat(t," + id - ").concat(e.id),columns:n,selection:a,cellClassName:u.cell,classNames:o,RowActions:i,typographyVariant:h}):s.a.createElement(A,{row:e,key:"index - ".concat(t," + id - ").concat(e.id),columns:n,selection:a,cellClassName:u.cell,classNames:o,RowActions:i,typographyVariant:h})}))))}var T=n(25),I=n(89),F=n(75),D=n(27),H=n(87),L=n(10),B=n(21),P=Object(B.createAction)("snackbar/NOTIFY",(function(e){return{messageInfo:e}}))(),W=Object(B.createAction)("snackbar/PUSH",(function(e){return{messageInfo:e}}))(),z=Object(B.createAction)("snackbar/SHIFT")(),M=Object(B.createAction)("snackbar/CLOSE")(),V=Object(B.createReducer)({queue:[],opened:!1,messageInfo:null}).handleAction(W,(function(e,t){var n=t.payload.messageInfo;return Object(L.a)(Object(L.a)({},e),{},{queue:[].concat(Object(H.a)(e.queue),[{message:n.message,variant:n.variant,key:(new Date).getTime()}])})})).handleAction(M,(function(e){return Object(L.a)(Object(L.a)({},e),{},{opened:!1})})).handleAction(z,(function(e){return e.queue.length>0?{messageInfo:e.queue[0],queue:e.queue.filter((function(e,t){return t>0})),opened:!0}:e})),q=Object(B.createAction)("registration/GET_REGISTRATIONS")(),U=Object(B.createAction)("registration/GET_REGISTRATIONS_SUCCESS",(function(e){return{list:e}}))(),G=Object(B.createAction)("registration/GET_REGISTRATIONS_FAILURE",(function(e){return{error:e}}))(),X=Object(B.createAction)("registration/CHANGE_ORDER",(function(e){return{orderBy:e}}))();n(88);function K(e,t){var n=t!==e.orderBy?"desc":"desc"===e.order?"asc":"desc";return Object(L.a)(Object(L.a)({},e),{},{order:n,orderBy:t})}var J=Object(B.createReducer)({data:[],loaded:!1,deleteSuccess:!1,submitting:!1,error:null,page:0,pageSize:10,order:"desc",orderBy:"updated_at"}).handleAction(q,(function(e){return Object(L.a)(Object(L.a)({},e),{},{loaded:!1})})).handleAction(U,(function(e,t){var n=t.payload.list;return Object(L.a)(Object(L.a)({},e),{},{data:n.map((function(e){var t;return{course_code:e.course_code,course_name:e.courses[0].name,student_name:e.students[0].full_name,student_id:e.student_id,registration_time:null===(t=e.unix_timestamp)||void 0===t?void 0:t.$timestamp}})),loaded:!0})})).handleAction(G,(function(e,t){var n=t.payload.error;return Object(L.a)(Object(L.a)({},e),{},{error:n})})).handleAction(X,(function(e,t){return K(e,t.payload.orderBy)})),$=n(16),Y=n.n($),Q=n(18),Z=n(61),ee=n.n(Z),te=ee.a.create({baseURL:"http://localhost:3001"});function ne(){return te.get("/registrations/latest-five")}var ae={registration:i},re={snackbar:a,registration:r},ie=re,oe=function(){var e=Object(f.d)();return Object(c.useMemo)((function(){var t=Object(L.a)({},re);return Object.keys(re).forEach((function(n){t[n]=Object(T.b)(re[n],e)})),t}),[e])},ce=Y.a.mark(ue),se=Y.a.mark(de),le=Y.a.mark(me);function ue(e){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Q.b)(ae.registration.getLatestFiveRegistrations);case 3:if(200===(t=e.sent).status){e.next=6;break}throw t;case 6:return e.next=8,Object(Q.c)(ie.registration.getRegistrationsSuccess(t.data));case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Q.c)(ie.registration.getRegistrationsFailure(e.t0));case 14:return e.next=16,Object(Q.c)(ie.snackbar.notify({message:"Failed to get registation data",variant:"error"}));case 16:case"end":return e.stop()}}),ce,null,[[0,10]])}function de(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.e)(ie.registration.getRegistrations,ue);case 2:case"end":return e.stop()}}),se)}function me(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([de()]);case 2:case"end":return e.stop()}}),le)}var fe=Y.a.mark(be),pe=Y.a.mark(he),ge=Y.a.mark(Ee);function be(e){var t;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Q.d)((function(e){return e.snackbar.opened}));case 2:return t=n.sent,n.next=5,Object(Q.c)(ie.snackbar.push(e.payload.messageInfo));case 5:if(!t){n.next=10;break}return n.next=8,Object(Q.c)(ie.snackbar.close());case 8:n.next=12;break;case 10:return n.next=12,Object(Q.c)(ie.snackbar.shift());case 12:case"end":return n.stop()}}),fe)}function he(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.e)(ie.snackbar.notify,be);case 2:case"end":return e.stop()}}),pe)}function Ee(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([he()]);case 2:case"end":return e.stop()}}),ge)}var xe=Y.a.mark(Oe);function Oe(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([me(),Ee()]);case 2:case"end":return e.stop()}}),xe)}var ve,ye=Object(D.a)(),Se=window.__REACT_APP_REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REACT_APP_REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||T.d,ke=Object(I.a)(),we=Object(T.a)(ke,Object(F.a)(ye)),je=Object(T.e)((ve=ye,Object(T.c)({router:Object(o.b)(ve),snackbar:V,registration:J})),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SERVER_ADDRESS:"http://localhost:3001"}).REACT_APP_REDUX_DEVTOOLS?Se(we):we);ke.run(Oe);var _e=f.e,Re=je,Ae=Object(_.a)((function(e){return{contentWrap:{display:"flex",height:"calc(100% - ".concat(e.spacing(1),"px)"),marginTop:e.spacing(1)},textButton:{height:e.spacing(4.5),marginLeft:e.spacing(1.5)},tablePaper:{height:"100%",justifyContent:"space-between",display:"flex",flexDirection:"column",flexBasis:"100%",position:"relative"},tableWrapper:{overflow:"auto"},status:{display:"flex"},statusPoint:{width:"12px",height:"12px",borderRadius:"12px",margin:"auto",marginRight:e.spacing(2),marginLeft:"0px"},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:{color:e.palette.secondary.main,backgroundColor:e.palette.secondary.light},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"},secondaryRow:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},nested:{paddingLeft:e.spacing(4)},formControl:{flexBasis:"100%",margin:"".concat(e.spacing(2),"px 0")},link:{textDecoration:"none",margin:"auto",whiteSpace:"nowrap"}}}));function Ce(){var e=oe(),t=Ae(),n=[{field:"student_id",title:"Student ID"},{field:"student_name",title:"Student Name"},{field:"course_name",title:"Course Name"},{field:"registration_time",title:"Registration Time"}],a=_e((function(e){return{order:e.registration.order,orderBy:e.registration.orderBy,registrations:e.registration.data,total:e.registration.data.length}})),r=a.registrations,i=(a.total,a.order),o=a.orderBy,c=s.a.useMemo((function(){return r.sort((function(e,t){return("desc"===i?1:-1)*function(e,t,n){var a=e[n],r=t[n];return"registration_time"===n&&(a=new Date(parseInt(e[n])),r=new Date(parseInt(t[n]))),r<a?-1:r>a?1:0}(e,t,o)}))}),[r,i,o]),l=s.a.useCallback((function(t){e.registration.changeOrder(t)}),[e]),u=s.a.useMemo((function(){return{order:i,orderBy:o,handleRequestSort:l}}),[i,o,l]);return s.a.createElement(h.a,{className:t.tablePaper},s.a.createElement("div",{className:t.tableWrapper},s.a.createElement(E.a,{className:t.toolbar},s.a.createElement("div",{className:t.title},s.a.createElement(x.a,{variant:"h6",id:"tableTitle"},"Registrations")),s.a.createElement("div",{className:t.spacer})),s.a.createElement(N,{data:c,columns:n,sorting:u,classNames:t})))}function Ne(){var e=Ae(),t=oe();return s.a.useEffect((function(){t.registration.getRegistrations();setInterval((function(){t.registration.getRegistrations()}),6e4)}),[]),s.a.createElement("div",{className:e.contentWrap},s.a.createElement(Ce,null))}var Te=function(){return s.a.createElement(b.c,null,s.a.createElement(b.a,{path:"/",exact:!0},s.a.createElement(Ne,null)),s.a.createElement(b.a,{path:"/registrations",exact:!0},s.a.createElement(Ne,null)))},Ie=n(86),Fe="#000000",De="#E57373",He="#FFFFFF",Le=Object(Ie.a)({typography:{fontFamily:['"Inter Regular"','"Inter Medium"','"Inter ExtraLightBETA"'].join(","),h1:{fontSize:93,lineHeight:"113px",letterSpacing:"-1.5px",fontFamily:"Inter ExtraLightBETA"},h2:{fontSize:58,lineHeight:"70px",letterSpacing:"-0.5px",fontFamily:"Inter ExtraLightBETA"},h3:{fontSize:47,lineHeight:"57px",fontStyle:"normal",fontWeight:"normal"},h4:{fontSize:33,lineHeight:"40px",fontStyle:"normal",fontWeight:"normal",letterSpacing:"0.25px"},h5:{fontSize:23,lineHeight:"28px",fontStyle:"normal",fontWeight:"normal"},h6:{fontSize:19,lineHeight:"23px",letterSpacing:"0.25px",fontWeight:500,fontFamily:"Inter Medium"},body1:{fontSize:16,lineHeight:"20px",letterSpacing:"0.5px"},body2:{fontSize:14,lineHeight:"17px",letterSpacing:"0.25px",fontStyle:"normal",fontWeight:"normal"},subtitle1:{fontSize:16,lineHeight:"19px",letterSpacing:"0.15px",fontStyle:"normal",fontWeight:"normal"},subtitle2:{fontSize:14,lineHeight:"24px",letterSpacing:"0.1px",fontStyle:"normal",fontWeight:500,fontFamily:"Inter Medium"},button:{fontSize:14,lineHeight:"17px",letterSpacing:"0.25px",fontStyle:"normal",fontWeight:600,textTransform:"uppercase",fontFamily:"Inter Medium"},caption:{fontSize:12,lineHeight:"16px",letterSpacing:"0.4px",fontStyle:"normal",fontWeight:"normal"},overline:{fontSize:12,lineHeight:"15px",letterSpacing:"2px",fontStyle:"normal",fontWeight:500,textTransform:"uppercase",fontFamily:"Inter Medium"}},palette:{primary:{light:"#ECEFF1",main:"#78909C",dark:"#263238",contrastText:He},secondary:{light:"#DEF3F4",main:"#00AEAD",dark:"#00544C",contrastText:He},background:{default:"#fafafa",paper:He},common:{black:Fe,white:He},error:{main:De}}}),Be=n(6),Pe=n(80),We=n.n(Pe),ze=n(82),Me=n.n(ze),Ve=n(83),qe=n.n(Ve),Ue=n(84),Ge=n.n(Ue),Xe=n(162),Ke=n(172),Je=n(169),$e=n(81),Ye=n.n($e),Qe=n(168),Ze=Object(_.a)((function(e){return{success:{backgroundColor:e.palette.secondary.main},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Qe.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"},margin:{margin:e.spacing(1)}}})),et={success:We.a,warning:Ye.a,error:Me.a,info:qe.a};function tt(e){var t=e.className,n=e.message,a=e.onClose,r=e.variant,i=Ze(),o=et[r];return s.a.createElement(Je.a,{className:Object(Be.a)(i[r],t),"aria-describedby":"client-snackbar",message:s.a.createElement("span",{id:"client-snackbar",className:i.message},s.a.createElement(o,{className:Object(Be.a)(i.icon,i.iconVariant)}),n),action:[s.a.createElement(Xe.a,{key:"close","aria-label":"close",color:"inherit",onClick:a},s.a.createElement(Ge.a,{className:i.icon}))]})}function nt(){var e=_e((function(e){return e.snackbar})),t=e.opened,n=e.messageInfo,a=oe();return n?s.a.createElement(Ke.a,{key:n.key,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:4e3,onClose:a.snackbar.close,onExited:a.snackbar.shift},s.a.createElement(tt,{onClose:a.snackbar.close,variant:n.variant,message:n.message})):null}u.a.render(s.a.createElement(g,{disabled:!1},s.a.createElement(d.a,{utils:m.a},s.a.createElement(p.a,{theme:Le},s.a.createElement(f.a,{store:Re},s.a.createElement(o.a,{history:ye},s.a.createElement(Te,null),s.a.createElement(nt,null)))))),document.getElementById("root"))},99:function(e,t,n){e.exports=n(130)}},[[99,1,2]]]);
//# sourceMappingURL=main.27a6d094.chunk.js.map